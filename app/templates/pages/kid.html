{% extends 'pages/base.html' %} {% block title %}Thông tin trẻ{% endblock %} {%
block breadcrumb_current %}Thông tin trẻ{% endblock %} {% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='Css/kid.css') }}" />
{% endblock %} {% block content %}
<div class="row g-3 mb-4">
  <!-- Thông tin cơ bản của trẻ -->
  <div class="col-lg-4 " >
    <div class="card shadow-sm border-0 h-100">
      <div class="card-header bg-white py-3 d-flex gap-2 justify-content-between">
        <h4 class="mb-0 text-brand fw-bold">
          <i class="fas fa-child me-2"></i>Thông tin trẻ
        </h4>

        <div>
          <select class="form-select" style="width: 180px" aria-label="Chọn bé" id="selectKid">
          <option></option>
          </select>
        </div>
        
      </select>
      </div>
      <div class="card-body p-3">
        <div class="text-center mb-3">
          <div class="avatar-wrapper mb-3">
            <div class="avatar-circle">
              {% if student_avatar %}
              <img
                id="avatar-image"
                src="{{ student_avatar }}"
                alt="Ảnh đại diện"
              />
              {% endif %}
              <i class="fas fa-user fa-3x text-brand avatar-placeholder"></i>
            </div>
            <label
              for="avatar-upload"
              class="avatar-upload-btn"
              title="Tải ảnh lên"
            >
              <i class="fas fa-camera"></i>
            </label>
            <input
              type="file"
              id="avatar-upload"
              name="avatar"
              accept="image/*"
              style="display: none"
            />
          </div>
          <h5 class="mb-1" id="nameField"></h5>
          <span class="badge bg-info-subtle text-info" id="classNameField"></span>
        </div>

        <div class="info-section">
          <div class="info-item">
            <div class="info-label">
              <i class="fas fa-calendar-alt text-brand me-2"></i>Ngày sinh
            </div>
            <div class="info-value" id="dobField"></div>
          </div>

          <div class="info-item">
            <div class="info-label">
              <i class="fas fa-venus-mars text-brand me-2"></i>Giới tính
            </div>
            <div class="info-value" id="genderField"></div>
          </div>

          <div class="info-item">
            <div class="info-label">
              <i class="fas fa-user-friends text-brand me-2"></i>Phụ huynh
            </div>
            <div class="info-value" id="parentNameField"></div>
          </div>

          <div class="info-item">
            <div class="info-label">
              <i class="fas fa-phone text-brand me-2"></i>Số điện thoại
            </div>
            <div class="info-value" id="parentPhoneField"></div>
          </div>

          <div class="info-item">
            <div class="info-label">
              <i class="fas fa-map-marker-alt text-brand me-2"></i>Địa chỉ
            </div>
            <div class="info-value" id="addressField"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Chỉ số sức khỏe -->
  <div class="col-lg-8">
    <div class="card shadow-sm border-0 h-100">
      <div class="card-header bg-white py-3">
        <h4 class="mb-0 text-brand fw-bold">
          <i class="fas fa-heart-pulse me-2"></i>Chỉ số sức khỏe
        </h4>
        <p class="text-muted mb-0 mt-1 small">
          Lịch sử ghi nhận các chỉ số sức khỏe của trẻ
        </p>
      </div>
      <div class="card-body p-3">
        <!-- Thống kê nhanh -->
        <div class="row g-2 mb-3">
          <div class="col-6 col-md-3">
            <div class="stat-card stat-weight">
              <div class="stat-icon">
                <i class="fas fa-weight"></i>
              </div>
              <div class="stat-content">
                <div class="stat-label">Cân nặng</div>
                <div class="stat-value" id="weightValue"></div>
                <div class="stat-date currentRecordDate"></div>
              </div>
            </div>
          </div>
          <div class="col-6 col-md-3">
            <div class="stat-card stat-height">
              <div class="stat-icon">
                <i class="fas fa-ruler-vertical"></i>
              </div>
              <div class="stat-content">
                <div class="stat-label">Chiều cao</div>
                <div class="stat-value" id="heightValue"></div>
                <div class="stat-date currentRecordDate"></div>
              </div>
            </div>
          </div>
          <div class="col-6 col-md-3">
            <div class="stat-card stat-temperature">
              <div class="stat-icon">
                <i class="fas fa-thermometer-half"></i>
              </div>
              <div class="stat-content">
                <div class="stat-label">Nhiệt độ</div>
                <div class="stat-value" id="tempValue"></div>
                <div class="stat-date currentRecordDate"></div>
              </div>
            </div>
          </div>
          <div class="col-6 col-md-3">
            <div class="stat-card stat-records">
              <div class="stat-icon">
                <i class="fas fa-clipboard-list"></i>
              </div>
              <div class="stat-content">
                <div class="stat-label">Tổng ghi nhận</div>
                <div class="stat-value" >{{count}} lần</div>
                <div class="stat-date">Trong tháng này</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Danh sách ghi nhận -->
        <div class="health-records-list">
          <h6 class="text-brand mb-2">
            <i class="fas fa-history me-2"></i>Lịch sử ghi nhận
          </h6>
          <div class="list-group list-group-flush">
            <!-- Ghi nhận 1 -->
            <div
              class="list-group-item health-record-item px-0 py-2 border-bottom"
              id ="healthRecord-1"
            >
              <div class="d-flex justify-content-between align-items-start">
                <div class="flex-grow-1">

                  <div class="d-flex align-items-center mb-1 flex-wrap gap-2" >
                    <span class="badge bg-light text-dark">
                      <i class="fas fa-calendar me-1"><span id="healthRecord1Date"></span></i>
                    </span>
                      <div id="checkRow1"></div>
                  </div>

                  <div class="row g-2 text-muted small mb-1">
                    <div class="col-12 col-md-4">
                      <i class="fas fa-weight me-1"></i>
                      <strong>Cân nặng: </strong><span id="healthRecord1Weight"></span> kg
                    </div>
                    <div class="col-12 col-md-4">
                      <i class="fas fa-ruler-vertical me-1"></i>
                      <strong>Chiều cao:</strong> <span id="healthRecord1Height"></span> cm
                    </div>
                    <div class="col-12 col-md-4">
                      <i class="fas fa-thermometer-half me-1"></i>
                      <strong>Nhiệt độ:</strong> <span id="healthRecord1Temp"></span> °C
                    </div>
                  </div>

                  <div class="text-muted small">
                    <i class="fas fa-user-md me-1"></i>
                    <strong>Người ghi nhận:</strong> <span id="healthRecord1Teacher"></span>
                  </div>
                  <div class="text-muted small mt-1">
                    <i class="fas fa-sticky-note me-1"></i>
                    <strong>Ghi chú:</strong> <span id="healthRecord1Note"></span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ghi nhận 2 -->
            <div
              class="list-group-item health-record-item px-0 py-2 border-bottom"
              id ="healthRecord-2"
            >
              <div class="d-flex justify-content-between align-items-start">
                <div class="flex-grow-1">

                  <div class="d-flex align-items-center mb-1 flex-wrap gap-2">
                    <span class="badge bg-light text-dark">
                      <i class="fas fa-calendar me-1" ><span id="healthRecord2Date"></span></i>
                    </span>
                    <div  id="checkRow2"></div>
                  </div>
                  <div class="row g-2 text-muted small mb-1">
                    <div class="col-12 col-md-4">
                      <i class="fas fa-weight me-1"></i>
                      <strong>Cân nặng:</strong> <span id="healthRecord2Weight"></span> kg
                    </div>
                    <div class="col-12 col-md-4">
                      <i class="fas fa-ruler-vertical me-1"></i>
                      <strong>Chiều cao:</strong> <span id="healthRecord2Height"></span> cm
                    </div>
                    <div class="col-12 col-md-4">
                      <i class="fas fa-thermometer-half me-1"></i>
                      <strong>Nhiệt độ:</strong> <span id="healthRecord2Temp"></span>
                    </div>
                  </div>
                  <div class="text-muted small">
                    <i class="fas fa-user-md me-1"></i>
                    <strong>Người ghi nhận:</strong> <span id="healthRecord2Teacher"></span>
                  </div>
                  <div class="text-muted small mt-1">
                    <i class="fas fa-sticky-note me-1"></i>
                    <strong>Ghi chú:</strong> <span id="healthRecord2Note"></span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ghi nhận 3 -->
            <div
              class="list-group-item health-record-item px-0 py-2 border-bottom"
              id ="healthRecord-3"
            >
              <div class="d-flex justify-content-between align-items-start">
                <div class="flex-grow-1">
                  <div class="d-flex align-items-center mb-1 flex-wrap gap-2">
                    <span class="badge bg-light text-dark">
                      <i class="fas fa-calendar me-1" id="healthRecord3Date"></i>
                    </span>
                    <div id="checkRow3"></div>
                  </div>
                  <div class="row g-2 text-muted small mb-1">
                    <div class="col-12 col-md-4">
                      <i class="fas fa-weight me-1"></i>
                      <strong>Cân nặng:</strong> <span id="healthRecord3Weight"></span> kg
                    </div>
                    <div class="col-12 col-md-4">
                      <i class="fas fa-ruler-vertical me-1"></i>
                      <strong>Chiều cao:</strong> <span id="healthRecord3Height"></span> cm
                    </div>
                    <div class="col-12 col-md-4">
                      <i class="fas fa-thermometer-half me-1"></i>
                      <strong>Nhiệt độ:</strong> <span id="healthRecord3Temp"></span>
                    </div>
                  </div>
                  <div class="text-muted small">
                    <i class="fas fa-user-md me-1"></i>
                    <strong>Người ghi nhận:</strong> <span id="healthRecord3Teacher"></span>
                  </div>
                  <div class="text-muted small mt-1">
                    <i class="fas fa-sticky-note me-1"></i>
                    <strong>Ghi chú:</strong> <span id="healthRecord3Note"></span>
                  </div>
                </div>
              </div>
            </div>
            <!-- Ghi nhận 4 -->
            <div
              class="list-group-item health-record-item px-0 py-2 border-bottom"
              id ="healthRecord-4"
            >
              <div class="d-flex justify-content-between align-items-start">
                <div class="flex-grow-1">
                  <div class="d-flex align-items-center mb-1 flex-wrap gap-2" >
                    <span class="badge bg-light text-dark">
                      <i class="fas fa-calendar me-1" id="healthRecord4Date"></i>
                    </span>
                    <div id="checkRow4"></div>
                  </div>
                  <div class="row g-2 text-muted small mb-1">
                    <div class="col-12 col-md-4">
                      <i class="fas fa-weight me-1"></i>
                      <strong>Cân nặng:</strong> <span id="healthRecord4Weight"></span> kg
                    </div>
                    <div class="col-12 col-md-4">
                      <i class="fas fa-ruler-vertical me-1"></i>
                      <strong>Chiều cao:</strong> <span id="healthRecord4Height"></span> cm
                    </div>
                    <div class="col-12 col-md-4">
                      <i class="fas fa-thermometer-half me-1"></i>
                      <strong>Nhiệt độ:</strong> <span id="healthRecord4Temp"></span>
                    </div>
                  </div>
                  <div class="text-muted small">
                    <i class="fas fa-user-md me-1"></i>
                    <strong>Người ghi nhận:</strong> <span id="healthRecord4Teacher"></span>
                  </div>
                  <div class="text-muted small mt-1">
                    <i class="fas fa-sticky-note me-1"></i>
                    <strong>Ghi chú:</strong> <span id="healthRecord4Note"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="{{ url_for('static', filename='Js/kid_page.js') }}"></script>
<script>fetchKidDataById({{parent_id}})</script>
<script>fetchHealthRecordById({{student_id}})</script>
<script>fetchHealthHistoryById({{student_id}})</script>
<script>loadKidSelectOptions({{parent_id}})</script>
{% endblock %}

